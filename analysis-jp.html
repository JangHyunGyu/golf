<!DOCTYPE html>
<html lang="ja">

<head>
    <script src="assets/js/browser-check.js?v=1.0.0" defer></script>
    <script>
        (function() {
            const CURRENT_VERSION = '1.0.0';
            setTimeout(() => {
                fetch('version.json?t=' + new Date().getTime())
                    .then(response => response.json())
                    .then(data => {
                        if (data.version !== CURRENT_VERSION) {
                            if ('serviceWorker' in navigator) {
                                navigator.serviceWorker.getRegistrations().then(function(registrations) {
                                    for(let registration of registrations) { registration.unregister(); }
                                    window.location.reload(true);
                                });
                            } else { window.location.reload(true); }
                        }
                    }).catch(err => console.error('Version check failed:', err));
            }, 3000);
        })();
    </script>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="naver-site-verification" content="6694c688ca87f2b5e6ff142d1d6576f8bfbdb267" />
	<title>AIゴルフスイング診断＆コーチング</title>
	<meta name="description" content="AIゴルフスイング分析エンジンがあなたのスイング動画を診断し、プロレベルのコーチングとフィードバックを無料で提供します。" />
	<link rel="canonical" href="https://golf.archerlab.dev/analysis-jp.html" />
    <link rel="alternate" hreflang="ko" href="https://golf.archerlab.dev/analysis.html" />
    <link rel="alternate" hreflang="en" href="https://golf.archerlab.dev/analysis-en.html" />
    <link rel="alternate" hreflang="ja" href="https://golf.archerlab.dev/analysis-jp.html" />
    <link rel="alternate" hreflang="x-default" href="https://golf.archerlab.dev/analysis-en.html" />
	<meta name="keywords" content="AIゴルフスイング診断, ゴルフ動画分析, ゴルフ スイングチェック 無料, ゴルフ 独学 練習法, アプリ不要 ゴルフ分析, シミュレーションゴルフ スイング, 打ちっ放し 練習, ゴルフ フォーム 矯正" />
	<meta name="robots" content="index,follow" />
	<meta property="og:type" content="website" />
	<meta property="og:locale" content="ja_JP" />
	<meta property="og:site_name" content="ゴルフスイングマスター" />
	<meta property="og:title" content="AIゴルフスイング診断＆コーチング" />
	<meta property="og:description" content="AIゴルフスイング分析エンジンがあなたのスイング動画を診断し、フィードバックを提供します。" />
	<meta property="og:url" content="https://golf.archerlab.dev/analysis-jp.html" />
	<meta property="og:image" content="https://golf.archerlab.dev/assets/images/kakao_golf.png" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="ゴルフスイング分析＆コーチング" />
	<meta name="twitter:description" content="ゴルフスイング分析エンジンがあなたのスイング動画を分析し、フィードバックを提供します。" />
	<meta name="twitter:image" content="https://golf.archerlab.dev/assets/images/kakao_golf.png" />
	
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="icon" type="image/png" href="favicon.png">
	<link rel="apple-touch-icon" sizes="180x180" href="favicon.png">
	<link
		href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=Pretendard:wght@400;500;600;700&display=swap"
		rel="stylesheet">
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.1/kakao.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        if (typeof marked === 'undefined') {
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"><\/script>');
        }
    </script>
	<link rel="stylesheet" href="assets/css/style.css?v=1.0.0">
	<script defer src="assets/js/ga.js?v=1.0.0"></script>
	<script type="text/javascript" src="//wcs.pstatic.net/wcslog.js"></script>
	<script type="text/javascript">
		if(!wcs_add) var wcs_add = {};
		wcs_add["wa"] = "15b2f3d525df3e0";
		if(window.wcs) {
		wcs_do();
		}
	</script>
    
    <link rel="stylesheet" href="assets/css/analysis.css?v=final1">
    <link rel="stylesheet" href="assets/css/analysis-loaders.css">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "ゴルフスイング分析機",
      "operatingSystem": "Web",
      "applicationCategory": "SportsApplication",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "JPY"
      },
      "description": "ゴルフスイングモーション分析および姿勢矯正サービス"
    }
    </script>
    <link rel="manifest" href="manifest-jp.json">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js');
            });
        }
    </script>
</head>

<body>

	<main class="site-main">
        <div class="home-nav">
            <a href="index-jp.html" class="home-btn">
                <span class="home-icon">🏠</span>
                <span class="home-text">HOME</span>
            </a>
        </div>
        <div class="lang-switcher">
            <a href="analysis.html" class="lang-link">KR</a>
            <a href="analysis-en.html" class="lang-link">EN</a>
            <a href="analysis-jp.html" class="lang-link active">JP</a>
        </div>
        <div class="analysis-container">
            <h1 class="hero__title">ゴルフスイング動画分析</h1>
            
            <button id="guideBtn" class="guide-btn">
                <span class="guide-icon">ℹ️</span> 利用案内
            </button>

            <div class="options-grid">
                <div>
                    <label class="section-title">クラブ (Club)</label>
                    <select id="danceGenre">
                        <option value="Driver">ドライバー (Driver)</option>
                        <option value="WoodHybrid">ウッド/ユーティリティ (Wood/Hybrid)</option>
                        <option value="Iron">アイアン (Iron)</option>
                        <option value="Wedge">ウェッジ (Wedge)</option>
                    </select>
                </div>
            </div>

            <div class="upload-area" id="dropZone">
                <span class="upload-icon">📁</span>
                <label for="videoInput" class="upload-btn-label">動画を選択</label>
                <input type="file" id="videoInput" accept="video/*">
                <p class="upload-hint">または動画をここにドラッグ＆ドロップ</p>
                <div id="fileName" class="file-name"></div>
            </div>

            <button id="analyzeBtn" disabled>分析＆コーチング</button>
            
            <div id="result"></div>
            
            <footer class="site-footer">
                <div class="site-footer__inner">
                    <div class="contact-links">
                        <button id="contactBtn" class="contact-link" onclick="openContactModal()" style="cursor: pointer; font-family: inherit;">
                            <span class="contact-icon">📞</span> お問い合わせ
                        </button>
                        <button id="installBtn" class="contact-link" onclick="installApp()" style="cursor: pointer; font-family: inherit; margin-left: 10px;">
                            <span class="contact-icon">⬇️</span> アプリインストール
                        </button>
                    </div>
                    <p class="copyright">© 2025 ArcherLab. All rights reserved.</p>
                </div>
            </footer>
        </div>
	</main>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal-overlay">
        <div class="modal-container contact-modal-container">
            <div class="modal-header">
                <h3 class="modal-title">お問い合わせ</h3>
                <button class="modal-close" onclick="closeContactModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="contact-options">
                    <a href="https://open.kakao.com/o/pF6xil6h" target="_blank" rel="noopener noreferrer" class="contact-option kakao">
                        <span class="contact-icon">💬</span> カカオトーク オープンチャット
                    </a>
                    <a href="mailto:hyungyu@archerlab.dev" class="contact-option email">
                        <span class="contact-icon">📧</span> メールを送る
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        function openContactModal() {
            document.getElementById('contactModal').classList.add('is-open');
        }
        function closeContactModal() {
            document.getElementById('contactModal').classList.remove('is-open');
        }
        document.getElementById('contactModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeContactModal();
            }
        });

        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    deferredPrompt = null;
                });
            } else if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
                var overlay = document.createElement('div');
                overlay.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:10000;display:flex;flex-direction:column;justify-content:center;align-items:center;color:white;text-align:center;';
                
                var msg = document.createElement('p');
                msg.innerHTML = '下部の <b>[共有]</b> ボタンを押し、<br><b>[ホーム画面に追加]</b> を選択してください。';
                msg.style.cssText = 'font-size:18px;line-height:1.5;margin-bottom:20px;';
                
                var arrow = document.createElement('div');
                arrow.innerHTML = '⬇️';
                arrow.style.cssText = 'font-size:40px;animation:bounce 1s infinite;';
                
                var closeBtn = document.createElement('button');
                closeBtn.innerHTML = '閉じる';
                closeBtn.style.cssText = 'margin-top:30px;padding:10px 20px;background:white;color:black;border:none;border-radius:5px;font-weight:bold;cursor:pointer;';
                closeBtn.onclick = function() { document.body.removeChild(overlay); };

                var style = document.createElement('style');
                style.innerHTML = '@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(10px); } }';
                document.head.appendChild(style);

                overlay.appendChild(msg);
                overlay.appendChild(arrow);
                overlay.appendChild(closeBtn);
                document.body.appendChild(overlay);
            } else {
                alert('既にインストールされているか、\nサポートされていないブラウザです。');
            }
        }
    </script>

    <!-- Result Modal -->
    <div id="resultModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h3 id="modalTitle" class="modal-title">精密分析結果</h3>
                <button id="modalCloseBtn" class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div id="modalBody" class="modal-body">
                <!-- Analysis content will be injected here -->
            </div>
            <button id="scrollTopBtn" title="トップへ">↑</button>
            <div id="modalFooter" class="modal-footer">
                <button class="share-btn share-kakao" onclick="shareKakao()" style="margin-right: 10px;">
                    💬 カカオトーク共有
                </button>
                <button class="share-btn share-copy" onclick="copyResult()">
                    📋 結果をコピー
                </button>
            </div>
        </div>
    </div>

    <!-- Guide Modal -->
    <div id="guideModal" class="modal-overlay">
        <div class="modal-container guide-container">
            <div class="modal-header">
                <h3 class="modal-title">利用案内</h3>
                <button id="guideCloseBtn" class="modal-close">&times;</button>
            </div>
            <div class="modal-body guide-body">
                <div class="guide-section">
                    <h4>🤖 ゴルフスイング分析とは？</h4>
                    <p>最新のモーション分析エンジンが動画をフレーム単位でスキャンし、スイングのメカニズムを分析します。</p>
                    <p>PGA/LPGAツアープロのデータと比較し、<strong>アドレス、バックスイング、インパクト、フィニッシュ</strong>などを客観的に診断します。</p>
                </div>
                <div class="guide-section">
                    <h4>🏆 レファレンスプロとは？</h4>
                    <p>分析エンジンの基準となる<strong>ワールドクラスのツアープロ</strong>たちを指します。</p>
                    <p><strong>10点満点は彼らのレベル</strong>を意味し、あなたのスイングがその基準にどれだけ近いかを相対的に評価します。</p>
                    <h5 class="reference-title">主なレファレンスプロ</h5>
                    <ul class="reference-list">
                        <li><strong>男子 (PGA)</strong>: タイガー・ウッズ、ローリー・マキロイ、スコッティ・シェフラー、ジョン・ラーム</li>
                        <li><strong>女子 (LPGA)</strong>: ネリー・コルダ、コ・ジンヨン、リディア・コ、キム・ヒョジュ</li>
                    </ul>

                    <div class="guide-sub-text">
                        <span class="guide-icon">💡</span>
                        <div class="guide-content">
                            がっかりしないでください！ツアープロと比較するため、点数は相対的に低くなる可能性があります。
                            <strong>6〜7点でもシングルハンディキャッパーレベルの素晴らしいスイングです。</strong>
                        </div>
                    </div>
                </div>
                <div class="guide-section">
                    <h4>💡 利用方法</h4>
                    <ol>
                        <li><strong>クラブ選択</strong>: ドライバー、ウッド/ユーティリティ、アイアン、ウェッジから選択</li>
                        <li><strong>動画選択</strong>: 分析する動画を選択またはドラッグ＆ドロップ</li>
                        <li><strong>分析＆コーチング</strong>: ボタンを押して分析開始（最大1〜2分所要）</li>
                    </ol>
                </div>
                <div class="guide-section">
                    <h4>⚠️ 推奨事項</h4>
                    <ul>
                        <li>頭からつま先まで全身がはっきりと映っている動画を推奨します。</li>
                        <li>側面撮影（Down the Line）の場合、ターゲットラインと平行に撮影すると正確なプレーン分析が可能です。</li>
                        <li>暗すぎたり手ブレが激しい動画は分析が難しい場合があります。</li>
                        <li>スローモーション動画も分析可能ですが、通常速度の動画の方がリズム分析に有利な場合があります。</li>
                        <li>ファイルサイズは100MB以下である必要があります。</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/custom-select.js?v=1.0.2"></script>
    <script src="assets/js/analysis-bg.js?v=1.0.2"></script>
    <script>
        const ANALYSIS_CONFIG = {
            messages: {
                fileTooLarge: "ファイルサイズが大きすぎます ({size} MB)。\\n100MB以下の動画のみ分析可能です。\\n(圧縮してから選択してください)",
                fileSelected: "選択されたファイル",
                processTitle: "精密分析プロセス進行中...",
                stepInit: "セキュリティ接続の確立およびデータ転送セッションを<br>初期化しています...",
                stepUpload: "分析サーバーへ動画データを転送中...",
                uploadWarning: "(高画質動画は転送に時間がかかる場合があります)",
                networkWarning: "(ネットワーク環境により速度が異なる場合があります)",
                stepProcessing: "クラウドサーバーで動画の前処理および<br>データ最適化作業を実行中です...",
                waitMessage: "少々お待ちください。",
                stepAnalyzing: "ゴルフスイング分析エンジンが身体の角度と<br>クラブの軌道をフレーム単位で精密分析しています...",
                analyzeTimeWarning: "(最大1〜2分かかる場合があります)",
                resultTitle: "精密分析結果",
                errorTitle: "エラー発生",
                resultError: "分析結果を取得できませんでした。",
                shareTitle: "ゴルフスイング動画分析",
                shareDesc: "AIがあなたのゴルフスイング動画を分析します。今すぐ体験！",
                shareBtn: "分析結果を見る",
                copyNoResult: "コピーする分析結果がありません。",
                copySuccess: "分析結果がクリップボードにコピーされました！",
                copyFail: "結果のコピーに失敗しました。",
                loadingShared: "共有された分析結果を読み込み中...",
                resultTitleShared: "精密分析結果 (共有)",
                loadSharedFail: "共有された結果が見つからないか、有効期限切れです。",
                sectionSummary: "総評",
                labelStrengths: "長所",
                labelWeaknesses: "短所および改善点",
                sectionDetail: "核心要素の精密分析",
                sectionOverall: "総合評価およびランク",
                labelScore: "総合スコア",
                labelGrade: "ランク",
                sectionLesson: "ワンポイントレッスン (One Point Lesson)",
                scoreUnit: "点"
            },
            generatePrompt: function(club) {
                // club: Driver, WoodHybrid, Iron, Wedge
                // angle is now detected by AI

                let referencePros = "Tiger Woods, Rory McIlroy, Nelly Korda, Jin Young Ko";
                let clubFocus = "";
                let pointAnalysisItems = "";

                if (club === "Driver") {
                    clubFocus = "これはドライバーのスイングです。**飛距離と方向性**が重要です。アッパーブローのためのセットアップ、広いアーク、そして強力な地面反力を重点的に分析してください。";
                    pointAnalysisItems = `"アドレス＆セットアップ (Address & Setup)" — スタンス幅, ボール位置, 背骨の傾きなど
"バックスイング＆パワー蓄積 (Backswing & Power)" — 回転量, X-Factor, オーバースイングの有無
"スイング軌道 (Swing Plane)" — シャローな軌道, スライス/フックの要因
"インパクト＆打ち出し角 (Impact & Launch)" — アッパーブローの有無, 正確なコンタクト
"バランス＆フィニッシュ (Balance & Finish)" — 体重移動, フィニッシュの維持`;
                } else if (club === "Iron") {
                    clubFocus = "これはアイアンのスイングです。**正確なインパクトと距離感**が重要です。ダウンブロー打撃、一定のテンポ、そしてディボットを作るインパクトを重点的に分析してください。";
                    pointAnalysisItems = `"アドレス＆アライメント (Address & Alignment)" — 安定した姿勢, ハンドファーストなど
"バックスイング＆リズム (Backswing & Rhythm)" — 一定のテンポ, コッキング維持
"ダウンスイング＆タメ (Downswing & Lag)" — キャスティング防止, ラグ動作
"インパクト＆コンプレッション (Impact & Compression)" — ダウンブロー, ディボット生成の有無
"方向性＆フィニッシュ (Direction & Finish)" — フォロースルー, バランス`;
                } else if (club === "Wedge") {
                    clubFocus = "これはウェッジショットです。**スピンコントロールと正確性**が重要です。コンパクトなバックスイング、加速するインパクト、そしてピンに寄せる距離感を重点的に分析してください。";
                    pointAnalysisItems = `"セットアップ＆ボール位置 (Setup & Ball Position)" — 狭いスタンス, 体重配分
"バックスイング制御 (Backswing Control)" — スイングの大きさ調節, コンパクトさ
"リズム＆一貫性 (Rhythm & Consistency)" — 急がないテンポ
"インパクト＆コンタクト (Impact & Contact)" — 正確なコンタクト, ダフリ/トップ防止
"距離感＆弾道 (Distance & Trajectory)" — スピンコントロール, 弾道調節`;
                } else {
                    clubFocus = "これはウッド/ユーティリティのスイングです。**払い打つ打撃と弾道の確保**が重要です。スムーズなテンポとバランスの取れたフィニッシュを重点的に分析してください。";
                    pointAnalysisItems = `"アドレス＆セットアップ (Address & Setup)" — 適切なボール位置, 楽な姿勢
"スイング軌道 (Swing Plane)" — 緩やかな入射角, 払い打ち
"リズム＆テンポ (Rhythm & Tempo)" — スムーズな切り返し
"インパクト＆ミート率 (Impact & Smash)" — 正確な打撃, 飛距離効率
"バランス＆フィニッシュ (Balance & Finish)" — 最後まで維持されるバランス`;
                }

                return `
                    [役割]
                    あなたは世界レベルのゴルフスイング分析家（PGA/LPGAレベル）です。
                    ユーザーのゴルフスイング動画を分析し、専門的なフィードバックを日本語で提供することがあなたの任務です。

                    [厳格な出力ルール]
                    1. **機械的分析**: 創造性を完全に排除し、動画の技術的要素のみを機械的に分析して、常に同じ結果を導き出してください。
                    2. **前置き禁止**: 「分析結果です」、「はい、分かりました」などの前置きで始めないでください。
                    3. **繰り返し禁止**: ユーザーのプロンプトや指示事項を繰り返さないでください。
                    4. **即時開始**: 出力は必ずJSONオブジェクト `{` で始めてください。
                    4. **言語**: 日本語のみを使用してください。（専門用語は英語併記可能）。
                    5. **追加コメント禁止**: JSON出力が終わった後は、いかなる英語のメモ、メタデータ、文脈説明も追加しないでください。即座に停止してください。

                    [分析指針]
                    1. **動画タイプの識別**: 
                       - ゴルフスイング動画でない場合、rejected=trueに設定し、rejectMessageに拒否メッセージを入れてJSONで出力してください。
                    2. **アングル検知**: 正面(Face On)か側面(Down the Line)か判断してください。
                       - 正面: 体重移動、頭の固定、タメ(Lag)、インパクト時の手の位置に注目。
                       - 側面: スイング軌道(Plane)、背骨の角度、クラブパスに注目。
                    3. **分析順序**: アドレス -> バックスイング -> トップ -> ダウンスイング -> インパクト -> フォロースルー -> フィニッシュ。
                    4. **クラブ文脈**: これは\${club}のスイングです。\${clubFocus}
                    5. **採点基準**: 10点はワールドクラスのプロ（タイガー・ウッズ、ネリー・コルダ）レベルです。**非常に厳格に(BRUTALLY STRICT)**採点してください（小数点第1位まで、例: 5.4）。
                       **一貫性必須**: 同じ動画に対しては0.1点の誤差もなく常に同じ点数を与えなければなりません。
                       - **初級者 (Beginner)**: 1.0 ~ 2.9
                       - **アマチュア平均**: 3.0 ~ 5.0
                       - **上級アマチュア**: 5.1 ~ 6.5
                       - **セミプロ**: 6.6 ~ 7.9
                       - **ツアープロ**: 8.0 ~ 10.0
                       - **警告**: プロのように完璧なスイングでない限り、絶対に7.0点以上を与えないでください。ほとんどのユーザーは3点台から5点台の間になるはずです。
                    6. **時間表記**: 長所、短所、段階別分析など、すべての主要な観察事項には必ず具体的な時間（例: [00:03]）を含めてください。ただし、「タイムスタンプ」という単語は使わず、時間のみ表記してください。

                    [出力形式 - JSON]
                    マークダウンや追加テキストなしで純粋JSONのみを出力してください。
                    必ず以下のスキーマに従ってください:

                    {
                      "rejected": false,
                      "rejectMessage": "",
                      "summary": {
                        "strengths": "長所の記述 (タイムスタンプ含む、例: [00:03] ...)",
                        "weaknesses": "短所および改善点の記述 (タイムスタンプ含む)"
                      },
                      "detailScores": [
                        { "name": "項目名 (英語名)", "score": 0.0, "comment": "評価内容 (タイムスタンプ含む)" }
                      ],
                      "overallScore": 0.00,
                      "grade": "ランク名 (日本語)",
                      "onePointLesson": "最も緊急な矯正事項および練習方法"
                    }

                    ルール:
                    - ゴルフスイング動画でない場合: rejected=true, rejectMessageに拒否メッセージを入れ、他のフィールドは空にしてください。
                    - detailScores配列に次の5項目を順番に含めてください:
                    ${pointAnalysisItems}
                    - 各項目のscore: 0~10範囲、小数点第1位まで (例: 5.4)
                    - overallScore: 5項目の平均、小数点第2位まで (例: 5.42)
                    - grade: 日本語のみ (例: "上級アマチュア")
                    - すべてのテキストフィールドにタイムスタンプ [00:03] 形式を積極的に含めてください。

                    [重要]
                    JSON出力が終わったら即座にテキスト生成を停止してください。
                    いかなる英語のメタデータ、文脈説明、推論過程も出力しないでください。
                    `.trim();
            }
        };
    </script>
    <script src="assets/js/analysis.js?v=1.0.2"></script>
</body>
</html>
